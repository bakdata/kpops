# Migrate from V2 to V3

## [Distribute defaults across multiple files](https://github.com/bakdata/kpops/pull/438/)

The default files are now read from where the pipeline path is defined. The `--defaults` flag is removed. Imagine the following folder structure:

```
└─ pipelines
   └── distributed-defaults
       ├── defaults.yaml
       ├── defaults_dev.yaml
       └── pipeline-deep
           ├── defaults.yaml
           └── pipeline.yaml
```

The `pipeline-base-dir` is set to `pipelines`. Now if we generate this pipeline with the following command:

```bash
kpops generate \
      --config . \
      --environment dev
      ./pipelines/distributed-defaults/pipeline-deep/pipeline.yaml
```

The defaults would be picked in the following order (high to low priority):

- `./pipelines/distributed-defaults/pipeline-deep/defaults.yaml`
- `./pipelines/distributed-defaults/defaults_dev.yaml`
- `./pipelines/distributed-defaults/defaults.yaml`

The deepest default.yaml file (i.e., the closest one to the `pipeline.yaml`) overwrites the higher-level defaults' values.
